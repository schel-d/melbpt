@use "css-template/import" as template;
@use "loading-spinner" as loading-spinner;
@use "line-colors" as line-colors;
@use "common" as common;

main {
  @include template.page-centerer("page-centered");
  @include line-colors.accent-classes;
  .page-centered {
    padding-top: 1rem;
    padding-left: 1rem;
    padding-right: 1rem;
    flex-grow: 1;
  }
  #back-button {
    @include common.button-icon-text;
  }
  .loading-spinner {
    @include loading-spinner.loading-spinner;
    color: var(--color-ink-30);
    width: 2rem;
    height: 2rem;
    margin: auto;
  }
  #loading,
  #error,
  #not-found {
    flex-grow: 1;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    .iconify {
      font-size: 1.5rem;
    }
  }
  #error {
    .iconify {
      color: var(--color-error);
    }
    p {
      color: var(--color-error);
    }
  }
  #train {
    margin-top: 1.5rem;
    h1 {
      @include common.page-header;
      margin-bottom: 0.5rem;
    }
    h2 {
      margin-bottom: 1rem;
    }
    #line-link {
      @include common.line-pill($clickable: true);
      align-self: start;
      margin-bottom: 1.25rem;
    }
    #stopping-pattern {
      .stop {
        @include template.row;
        height: 2rem;
        position: relative;

        .node {
          position: absolute;
          height: 0.3rem;
          width: 1.1rem;
          border-radius: 0.5rem;
          top: 50%;
          left: 0.2rem;
          transform: translateY(-50%);
          background-color: var(--color-accent);
        }
        .edge {
          position: absolute;
          top: 50%;
          height: 2rem;
          width: 0.3rem;
          left: calc((1.5rem - 0.3rem) / 2);
          background-color: var(--color-accent);
          opacity: 0.66;
        }
        .stop-name {
          flex-shrink: 1;
          min-width: 0;
        }
        .stop-name p {
          color: var(--color-ink-100);
          font-weight: bold;
          margin-left: 2.5rem;
        }
        .separator-dot {
          margin-left: 0.3rem;
          margin-right: 0.3rem;
        }
      }
      .stop:first-child,
      .stop:last-child {
        .node {
          height: 0.5rem;
          width: 1.5rem;
          left: 0;
        }
      }
      .stop:last-child .edge {
        display: none;
      }
      .stop.express {
        .stop-name p {
          font-weight: normal;
          font-size: 0.75rem;
          color: var(--color-ink-60);
        }
        .node {
          display: none;
        }
        &.prior .edge {
          top: calc(50% - 0.15rem);
          height: 2rem;
        }
      }
      .stop.prior {
        opacity: 0.5;
        .edge {
          height: 1.86rem;
        }
      }
      .stop:hover,
      .stop:focus-visible {
        .stop-name p {
          text-decoration: underline;
        }
      }
    }
  }
}
